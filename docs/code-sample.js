!function(t){var e={};function n(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(s,i,function(e){return t[e]}.bind(null,i));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";var s,i;!function(t){t[t.Stroke=0]="Stroke",t[t.Fill=1]="Fill"}(s||(s={})),function(t){t[t.Center=0]="Center",t[t.Right=1]="Right",t[t.Left=2]="Left"}(i||(i={}));class o{}class r extends o{}class a{}class d extends a{}class c{constructor(t,e){this.pos=t,this.size=e}getSize(){return this.size||{height:0,width:0}}getLeftTopPos(){return this.pos}getLeftBottomPos(){return{x:this.pos.x,y:this.pos.y+this.getSize().height}}getRightTopPos(){return{x:this.pos.x+this.getSize().width,y:this.pos.y}}getRightBottomPos(){return{x:this.pos.x+this.getSize().width,y:this.pos.y+this.getSize().height}}getCenterPos(){return{x:this.pos.x+this.size.width/2,y:this.pos.y+this.size.height/2}}increaseX(t){return this.pos.x+=t,this}increaseY(t){return this.pos.y+=t,this}static init(t,e){const n={width:e.x-t.x,height:e.y-t.y};return new c(t,n)}toJSON(){return JSON.stringify({pos:this.pos,size:this.size,leftTopPos:this.getLeftTopPos(),leftBottomPos:this.getLeftBottomPos(),rightBottomPos:this.getRightBottomPos(),rightTopPos:this.getRightTopPos()},null,"\t")}}class h extends o{constructor(){super(...arguments),this.closePath=!1}}n.d(e,"d",(function(){return s})),n.d(e,"f",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h}))},function(t,e,n){"use strict";var s=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))};class i{constructor(t,e){t instanceof HTMLCanvasElement&&(this.context=t.getContext("2d")),t instanceof CanvasRenderingContext2D&&(this.context=t),this.data=e}render(){return s(this,void 0,void 0,(function*(){return yield this.doRender()}))}updateFont(t){let e="";t.size&&(e+=t.size+"px"),t.family&&(e+=" "+t.family),this.context.font=e}updateFillStyle(t){return!!t&&(this.context.fillStyle=t,!0)}updateStrokeStyle(t){return!!t&&(this.context.strokeStyle=t,!0)}}var o=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))};class r extends i{doRender(){return o(this,void 0,void 0,(function*(){const t=new Image;return t.src=this.data.src,new Promise((e,n)=>{t.addEventListener("load",()=>{this.data.srcCoords.size||(this.data.srcCoords.size={width:t.width,height:t.height}),this.data.destCoords.size||(this.data.destCoords.size=this.data.srcCoords.size),this.context.drawImage(t,this.data.srcCoords.pos.x,this.data.srcCoords.pos.y,this.data.srcCoords.size.width,this.data.srcCoords.size.height,this.data.destCoords.pos.x,this.data.destCoords.pos.y,this.data.destCoords.size.width,this.data.destCoords.size.height),e({success:!0,result:this.data.destCoords})}),t.addEventListener("error",t=>{n(t)})})}))}}var a=n(0),d=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))};class c extends i{doRender(){return d(this,void 0,void 0,(function*(){return new Promise((t,e)=>{this.updateFillStyle(this.data.fillStyle),this.updateStrokeStyle(this.data.strokeStyle),this.data.drawType===a.d.Fill&&this.context.fillRect(this.data.pos.x,this.data.pos.y,this.data.size.width,this.data.size.height),this.data.drawType===a.d.Stroke&&this.context.strokeRect(this.data.pos.x,this.data.pos.y,this.data.size.width,this.data.size.height),t({success:!0,result:new a.a(this.data.pos,this.data.size)})})}))}}var h=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))};class l extends i{doRender(){return h(this,void 0,void 0,(function*(){this.updateFont(this.data.font),this.updateFillStyle(this.data.fillStyle);const t=this.context.measureText(this.data.font.text).width;let e=this.data.pos.x;this.data.font.align===a.f.Right&&(e=this.context.canvas.width-this.data.pos.x-t),this.data.font.align===a.f.Center&&(e=this.data.pos.x-t/2);const n=this.data.pos.y+this.data.font.size;this.data.drawType===a.d.Fill&&this.context.fillText(this.data.font.text,e,n),this.data.drawType===a.d.Stroke&&this.context.strokeText(this.data.font.text,e,n);const s={success:!0,result:new a.a({x:e,y:this.data.pos.y},{height:this.data.font.size,width:t})};return Promise.resolve(s)}))}}class u extends i{doRender(){this.updateFillStyle(this.data.fillStyle),this.updateStrokeStyle(this.data.strokeStyle),"number"==typeof this.data.lineWidth&&(this.context.lineWidth=this.data.lineWidth),this.context.beginPath(),this.data.positions.forEach((t,e)=>{0===e?this.context.moveTo(t.x,t.y):this.context.lineTo(t.x,t.y)}),this.data.closePath&&this.context.closePath(),this.data.drawType===a.d.Fill&&this.context.fill(),this.data.drawType===a.d.Stroke&&this.context.stroke();let t=0,e=0,n=0,s=0;this.data.positions.forEach(i=>{i.x<t&&(t=i.x),i.x>n&&(n=i.x),i.y<e&&(e=i.y),i.y>s&&(s=i.y)});const i=new a.e;return i.success=!0,i.result=a.a.init({x:t,y:e},{x:n,y:s}),i.result.data=this.data,Promise.resolve(i)}}var f=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))};class y{constructor(){this.renders=[]}push(t,e){return e||(e=Date.now().toString()),this.renders.push({id:e,getRender:t}),this}execute(){return f(this,void 0,void 0,(function*(){return this.renders.reduce((t,e)=>t.then(()=>e.getRender({chain:this}).render().then(t=>(e.renderResult=t,"ok")).catch(()=>"fail")),Promise.resolve("first"))}))}get renderResults(){return this.renders.filter(t=>null!==t.renderResult&&void 0!==t.renderResult)}get lastRenderResult(){const t=this.renderResults,e=t[t.length-1];return e?e.renderResult:null}getRenderResultById(t){const e=this.renderResults.filter(e=>e.id===t)[0];return e?e.renderResult:null}}var g=function(t,e,n,s){return new(n||(n=Promise))((function(i,o){function r(t){try{d(s.next(t))}catch(t){o(t)}}function a(t){try{d(s.throw(t))}catch(t){o(t)}}function d(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,a)}d((s=s.apply(t,e||[])).next())}))};class p{constructor(t){t instanceof HTMLCanvasElement&&(this.context=t.getContext("2d")),t instanceof CanvasRenderingContext2D&&(this.context=t)}calculate(t,e){const n=new Function(t).apply(this);return null==n||""===n?e:n}convert2Image(t){const e=this.calculate(t.getAttribute("src-coords-pos")),n=this.calculate(t.getAttribute("dest-coords-pos")),s=this.calculate(t.getAttribute("dest-coords-size"));return new r(this.context,{src:t.getAttribute("src"),srcCoords:new a.a(e),destCoords:new a.a(n,s)})}render(t){return g(this,void 0,void 0,(function*(){let e=[];if("string"==typeof t){const n=document.querySelector(t);e=Array.from(n.content.childNodes)}return Array.isArray(t)&&(e=e),this.chain=new y,e.forEach(t=>{"IMG"===t.nodeName&&this.chain.push(e=>this.convert2Image(t))}),this.chain.execute()}))}}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"b",(function(){return u})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return p}))},function(t,e,n){"use strict";n.r(e);var s=n(1),i=n(0);const o=document.querySelector("#canvas1").getContext("2d"),r=new s.d;r.push(t=>new s.a(o,{src:"./resources/280TSI.jpg",srcCoords:new i.a({x:0,y:0}),destCoords:new i.a({x:0,y:0},{width:300,height:225})}),"main-image").push(t=>new s.a(o,{src:"http://vw.faw-vw.com/content/dam/vw-ngw/faw-vw/homepage/site_logo/pc_logo.png",srcCoords:new i.a({x:0,y:0}),destCoords:new i.a({x:10,y:8})}),"logo").push(t=>{const e=r.getRenderResultById("main-image").result.getRightBottomPos();return new s.f(o,{pos:{x:5,y:e.y+12},font:{text:"大众 凌渡 280TSI DSG舒适版国VI",size:14,family:"sans-serif",align:i.f.Right},drawType:i.d.Fill})},"title").push(t=>{const e=t.chain.getRenderResultById("logo").result,n=new i.c;return n.pos=e.pos,n.size=e.size,n.strokeStyle="gray",new s.c(o,n)},"rect").push(t=>{const e=t.chain.getRenderResultById("title").result.getRightBottomPos();return new s.f(o,{pos:{x:5,y:e.y+10},font:{text:"18.00万",size:12,family:"sans-serif",align:i.f.Right},fillStyle:"gray",drawType:i.d.Fill})},"small-price").push(t=>{const e=t.chain.getRenderResultById("small-price").result,n=t.chain.getRenderResultById("title").result.getRightBottomPos();return new s.f(o,{pos:{x:e.size.width+10,y:n.y+5},font:{text:"12.48万",size:18,family:"sans-serif",align:i.f.Right},fillStyle:"red",drawType:i.d.Fill})},"large-price").push(t=>{const e=t.chain.getRenderResultById("small-price").result,n=new i.b;return n.positions=[{x:e.getLeftTopPos().x,y:e.getCenterPos().y+2},{x:e.getRightBottomPos().x,y:e.getCenterPos().y+2}],n.strokeStyle="gray",n.drawType=i.d.Stroke,n.lineWidth=.8,new s.b(o,n)}).push(t=>{const e=t.chain.getRenderResultById("small-price").result,n={drawType:i.d.Fill,pos:{x:5,y:e.getRightBottomPos().y+10},fillStyle:"#F5594E",font:{size:10,text:"总优惠可达5.63万  低于同城4S店报价1.83万",family:"Helvetica",align:i.f.Right}};return new s.f(o,n)},"sub-title").push(t=>{const e=t.chain.getRenderResultById("sub-title").result.getRightBottomPos().y+15,n=new i.b;return n.positions=[{x:5,y:e},{x:o.canvas.width-5,y:e}],n.drawType=i.d.Stroke,n.lineWidth=.5,n.strokeStyle="#ccc",new s.b(o,n)},"splitor").push(t=>{const e=t.chain.getRenderResultById("splitor").result.getRightBottomPos().y+15,n=o.canvas.width/4,r=new i.b;return r.positions=[{x:5,y:e+20},{x:5+n,y:e+20},{x:5+n+n,y:e+40},{x:5+n+n+n,y:e+0},{x:5+n+n+n+n-10,y:e+0},{x:5+n+n+n+n-10,y:e+72},{x:5,y:e+72},{x:5,y:e+20}],r.drawType=i.d.Fill,r.fillStyle="#fdeeed",new s.b(o,r)},"fold-line").push(t=>{const e=t.chain.getRenderResultById("fold-line").result.data;return new s.f(o,{pos:{x:e.positions[1].x,y:e.positions[1].y-15},font:{text:"14.78万",size:10,align:i.f.Center},fillStyle:"#f5594e",drawType:i.d.Fill})}).push(t=>{const e=t.chain.getRenderResultById("fold-line").result.data;return new s.f(o,{pos:{x:e.positions[2].x,y:e.positions[2].y},font:{text:"12.48万",size:10,align:i.f.Center},fillStyle:"#f5594e",drawType:i.d.Fill})}).push(t=>{const e=t.chain.getRenderResultById("fold-line").result.data;return new s.f(o,{pos:{x:e.positions[3].x,y:e.positions[3].y-12},font:{text:"16.27万",size:10,align:i.f.Center},fillStyle:"#f5594e",drawType:i.d.Fill})}).push(t=>{const e=t.chain.getRenderResultById("main-image").result;return new s.a(o,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHwAAAB8CAYAAACrHtS+AAADFklEQVR4nO2WS27FMAwDc/9Lt/ugBeSQluhkCHinD8XJA951XddPwlNUnef24t7b9MYNABzgawI4wKXgp/aOAO+QEpRSV+11f7juD1y8LcNIR121F+ANRjrqqr0AbzDSUVftBXiDkY66au/ngb85gA5/yl53zgBv8AdwgJfrAC4I4ABv8QfwrACsOw64N8PIYAAAnzAyGADAJ4wMBgDwCSODAQB8wog7vI55h37gGUaqAjjAy71TXgAO8HIdwAG+H7hb7gCSepV73QI4wAHu7lXudQvgAAe4u1e5160S8KmnBHVi3eAbN3AEIIADHOAABzjA04D/6TBY7o+qukOpS1K+w5sArinf4U0A15Tv8CaAa8p3eBPANV1KgE9DntrRIbe/DXUAdwrgRXMABzjA99QB3KnjgCvDFCk73B9axx2DewEO8M3m3DsADvByHcAbzLl3ANz8L33D0pG6am/6E+8A+GlPvAPgpz3xDoCf9sQ7AH7aE+/wLVXUsde9ww3ILYADHOAAB3jLPIADXLptwZ8PeMexU/46PLv9ARzgAHfvUOYBXDjW7Q/g5kDd4bn9fQq4clhH75Q67t1QB/CnAjjA7b0ADxLAAW7v3Q68Oiz92K95XugH+Bs8A/xjngH+Mc8A/5jnGOAdAaTDTdoBcLPn9B0AN3tO3wFws+f0HQA3e07fUQK+MOwVMBQvHbmI+QH8qQAOcIADHOAAnwTuOn6H3AFMAVLutf9gJIebBXCA2+sAHiSAA9xe9zngHSE8NZwUcrXXXbfhzcMG+JoXgAsCOMABDvAXA+9QB7RqneLl0I8P4ADfLIDX5wFcmAdwgANcMbLBXPSHkfQW7gC4816Am4NXBHCA2+8FuDl4RQB/CXD3h6FoEGT1AdwpgBfnddR1CODFeR11HQJ4cV5HXYcAXpyn1Cmek+a5ewEePs/dC/Dwee5egIfPc/cCPHyeu/cxcLemgCu97g/cvWNhL8ArvQAXBHCAS3UdvQAXBPAg4FNPgeYOqkODWc/DBjjA/w1FCS9JAC+GooSXJIAXQ1HCS9JUzr/WYmyK3t9blgAAAABJRU5ErkJggg==",srcCoords:new i.a({x:0,y:0}),destCoords:new i.a({x:e.getLeftBottomPos().x+5,y:e.getLeftBottomPos().y},{width:70,height:70})})});const a=Date.now();r.execute().then(()=>{const t=Date.now();console.log(`time: ${(t-a)/1e3}s`)})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9EcmF3LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvRHJhd1JlY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9SZW5kZXJSZXN1bHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9Db29yZGluYXRlRGF0YS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL0RyYXdMaW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvQ29yZVJlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9JbWFnZVJlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9SZWN0UmVuZGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9jb3JlL1RleHRSZW5kZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvcmUvTGluZVJlbmRlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9SZW5kZXJDaGFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9SZW5kZXJDaGFpbkRpcmVjdGl2ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29yZS9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29kZS1zYW1wbGUudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJEcmF3VHlwZSIsIlRleHRBbGlnblR5cGUiLCJTdHJva2VGaWxsU3R5bGVNaXgiLCJSZW5kZXJSZXN1bHQiLCJSZW5kZXJDb29yZHNSZXN1bHQiLCJDb29yZGluYXRlRGF0YSIsInN0YXJ0Iiwic2l6ZSIsInRoaXMiLCJwb3MiLCJoZWlnaHQiLCJ3aWR0aCIsIngiLCJ5IiwiZ2V0U2l6ZSIsImVuZCIsIkpTT04iLCJzdHJpbmdpZnkiLCJsZWZ0VG9wUG9zIiwiZ2V0TGVmdFRvcFBvcyIsImxlZnRCb3R0b21Qb3MiLCJnZXRMZWZ0Qm90dG9tUG9zIiwicmlnaHRCb3R0b21Qb3MiLCJnZXRSaWdodEJvdHRvbVBvcyIsInJpZ2h0VG9wUG9zIiwiZ2V0UmlnaHRUb3BQb3MiLCJzdXBlciIsImFyZ3VtZW50cyIsImNsb3NlUGF0aCIsIl9fYXdhaXRlciIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwic3RlcCIsIm5leHQiLCJlIiwicmVqZWN0ZWQiLCJyZXN1bHQiLCJkb25lIiwidGhlbiIsImFwcGx5IiwiQ29yZVJlbmRlciIsImVsZW1lbnQiLCJkYXRhIiwiSFRNTENhbnZhc0VsZW1lbnQiLCJjb250ZXh0IiwiZ2V0Q29udGV4dCIsIkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCIsImRvUmVuZGVyIiwiZm9udCIsImZhbWlseSIsImZpbGwiLCJmaWxsU3R5bGUiLCJzdHJva2UiLCJzdHJva2VTdHlsZSIsImltZyIsIkltYWdlIiwic3JjIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNyY0Nvb3JkcyIsImRlc3RDb29yZHMiLCJkcmF3SW1hZ2UiLCJzdWNjZXNzIiwidXBkYXRlRmlsbFN0eWxlIiwidXBkYXRlU3Ryb2tlU3R5bGUiLCJkcmF3VHlwZSIsIkZpbGwiLCJmaWxsUmVjdCIsIlN0cm9rZSIsInN0cm9rZVJlY3QiLCJ1cGRhdGVGb250IiwidGV4dFdpZHRoIiwibWVhc3VyZVRleHQiLCJ0ZXh0IiwiZGVzdFgiLCJhbGlnbiIsIlJpZ2h0IiwiY2FudmFzIiwiQ2VudGVyIiwiZGVzdFkiLCJmaWxsVGV4dCIsInN0cm9rZVRleHQiLCJsaW5lV2lkdGgiLCJiZWdpblBhdGgiLCJwb3NpdGlvbnMiLCJmb3JFYWNoIiwiaW5kZXgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJtaW5Qb3NYIiwibWluUG9zWSIsIm1heFBvc1giLCJtYXhQb3NZIiwicmVuZGVyUmVzdWx0IiwiaW5pdCIsIlJlbmRlckNoYWluIiwicmVuZGVycyIsInJlbmRlciIsImlkIiwiRGF0ZSIsIm5vdyIsInRvU3RyaW5nIiwicHVzaCIsImdldFJlbmRlciIsInJlZHVjZSIsInByZXYiLCJjaGFpbiIsImNhdGNoIiwiZmlsdGVyIiwiaXRlbSIsInVuZGVmaW5lZCIsInJlc3VsdHMiLCJyZW5kZXJSZXN1bHRzIiwibGVuZ3RoIiwiY29kZSIsImRlZiIsIkZ1bmN0aW9uIiwic3JjQ29vcmRzUG9zIiwiY2FsY3VsYXRlIiwiZ2V0QXR0cmlidXRlIiwiZGVzdENvb3Jkc1BvcyIsImRlc3RDb29yZHNTaXplIiwidGVtcGxhdGVJZE9yQ2hpbGRyZW4iLCJjaGlsZHJlbk5vZGVzIiwidGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJBcnJheSIsImZyb20iLCJjb250ZW50IiwiY2hpbGROb2RlcyIsImlzQXJyYXkiLCJub2RlIiwibm9kZU5hbWUiLCJwYXJhbXMiLCJjb252ZXJ0MkltYWdlIiwiZXhlY3V0ZSIsImdldFJlbmRlclJlc3VsdEJ5SWQiLCJsb2dvUmVzdWx0Iiwic21hbGxQcmljZVJlc3VsdCIsInRpdGxlUG9zIiwiZ2V0Q2VudGVyUG9zIiwicG9zWSIsImJhc2VZIiwicGVyV2lkdGgiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0Ys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QkFBb0IsYUFBYXBHLE9BQU9NLEtBQ2xFLE9BQU8sSUFBSSxJQUFXRSxFQUFTLENBQzNCekMsSUFBSyxDQUFFRyxFQUFHb0MsRUFBS3lDLFVBQVUsR0FBRzdFLEVBQUdDLEVBQUdtQyxFQUFLeUMsVUFBVSxHQUFHNUUsRUFBSSxJQUN4RHlDLEtBQU0sQ0FBRXdCLEtBQU0sU0FBVXZFLEtBQU0sR0FBSXlFLE1BQU8sSUFBY0csUUFDdkQxQixVQUFXLFVBQ1hhLFNBQVUsSUFBU0MsU0FFeEJvQyxLQUFLZ0MsSUFDSixNQUFNekMsRUFBZXlDLEVBQU81QixNQUFNK0Isb0JBQW9CLGNBQWNwRyxPQUNwRSxPQUFPLElBQUksSUFBWVEsRUFBUyxDQUM1QlksSUFBSyxxb0NBQ0xFLFVBQVcsSUFBSSxJQUFlLENBQUVwRCxFQUFHLEVBQUdDLEVBQUcsSUFDekNvRCxXQUFZLElBQUksSUFBZSxDQUMzQnJELEVBQUdzRixFQUFhN0UsbUJBQW1CVCxFQUFJLEVBQUdDLEVBQUdxRixFQUFhN0UsbUJBQW1CUixHQUM5RSxDQUNDRixNQUFPLEdBQ1BELE9BQVEsU0FJcEIsTUFBTUosRUFBUWtHLEtBQUtDLE1BQ25CTSxFQUFNOEIsVUFBVWpHLEtBQUssS0FDakIsTUFBTTdCLEVBQU15RixLQUFLQyxNQUNqQjZDLFFBQVFDLElBQUksVUFBVXhJLEVBQU1ULEdBQVMiLCJmaWxlIjoiY29kZS1zYW1wbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJleHBvcnQgdmFyIERyYXdUeXBlO1xuKGZ1bmN0aW9uIChEcmF3VHlwZSkge1xuICAgIERyYXdUeXBlW0RyYXdUeXBlW1wiU3Ryb2tlXCJdID0gMF0gPSBcIlN0cm9rZVwiO1xuICAgIERyYXdUeXBlW0RyYXdUeXBlW1wiRmlsbFwiXSA9IDFdID0gXCJGaWxsXCI7XG59KShEcmF3VHlwZSB8fCAoRHJhd1R5cGUgPSB7fSkpO1xuZXhwb3J0IHZhciBUZXh0QWxpZ25UeXBlO1xuKGZ1bmN0aW9uIChUZXh0QWxpZ25UeXBlKSB7XG4gICAgVGV4dEFsaWduVHlwZVtUZXh0QWxpZ25UeXBlW1wiQ2VudGVyXCJdID0gMF0gPSBcIkNlbnRlclwiO1xuICAgIFRleHRBbGlnblR5cGVbVGV4dEFsaWduVHlwZVtcIlJpZ2h0XCJdID0gMV0gPSBcIlJpZ2h0XCI7XG4gICAgVGV4dEFsaWduVHlwZVtUZXh0QWxpZ25UeXBlW1wiTGVmdFwiXSA9IDJdID0gXCJMZWZ0XCI7XG59KShUZXh0QWxpZ25UeXBlIHx8IChUZXh0QWxpZ25UeXBlID0ge30pKTtcbmV4cG9ydCBjbGFzcyBTdHJva2VGaWxsU3R5bGVNaXgge1xufVxuIiwiaW1wb3J0IHsgU3Ryb2tlRmlsbFN0eWxlTWl4IH0gZnJvbSBcIi4vRHJhd1wiO1xuZXhwb3J0IGNsYXNzIERyYXdSZWN0IGV4dGVuZHMgU3Ryb2tlRmlsbFN0eWxlTWl4IHtcbn1cbiIsImV4cG9ydCBjbGFzcyBSZW5kZXJSZXN1bHQge1xufVxuZXhwb3J0IGNsYXNzIFJlbmRlckNvb3Jkc1Jlc3VsdCBleHRlbmRzIFJlbmRlclJlc3VsdCB7XG59XG4iLCJleHBvcnQgY2xhc3MgQ29vcmRpbmF0ZURhdGEge1xuICAgIGNvbnN0cnVjdG9yKHN0YXJ0LCBzaXplKSB7XG4gICAgICAgIHRoaXMucG9zID0gc3RhcnQ7XG4gICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgfVxuICAgIGdldFNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgfHwgeyBoZWlnaHQ6IDAsIHdpZHRoOiAwIH07XG4gICAgfVxuICAgIGdldExlZnRUb3BQb3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvcztcbiAgICB9XG4gICAgZ2V0TGVmdEJvdHRvbVBvcygpIHtcbiAgICAgICAgcmV0dXJuIHsgeDogdGhpcy5wb3MueCwgeTogdGhpcy5wb3MueSArIHRoaXMuZ2V0U2l6ZSgpLmhlaWdodCB9O1xuICAgIH1cbiAgICBnZXRSaWdodFRvcFBvcygpIHtcbiAgICAgICAgcmV0dXJuIHsgeDogdGhpcy5wb3MueCArIHRoaXMuZ2V0U2l6ZSgpLndpZHRoLCB5OiB0aGlzLnBvcy55IH07XG4gICAgfVxuICAgIGdldFJpZ2h0Qm90dG9tUG9zKCkge1xuICAgICAgICByZXR1cm4geyB4OiB0aGlzLnBvcy54ICsgdGhpcy5nZXRTaXplKCkud2lkdGgsIHk6IHRoaXMucG9zLnkgKyB0aGlzLmdldFNpemUoKS5oZWlnaHQgfTtcbiAgICB9XG4gICAgZ2V0Q2VudGVyUG9zKCkge1xuICAgICAgICByZXR1cm4geyB4OiB0aGlzLnBvcy54ICsgKHRoaXMuc2l6ZS53aWR0aCAvIDIpLCB5OiB0aGlzLnBvcy55ICsgKHRoaXMuc2l6ZS5oZWlnaHQgLyAyKSB9O1xuICAgIH1cbiAgICBpbmNyZWFzZVgodmFsdWUpIHtcbiAgICAgICAgdGhpcy5wb3MueCArPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGluY3JlYXNlWSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnBvcy55ICs9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RhdGljIGluaXQoc3RhcnQsIGVuZCkge1xuICAgICAgICBjb25zdCBzaXplID0geyB3aWR0aDogZW5kLnggLSBzdGFydC54LCBoZWlnaHQ6IGVuZC55IC0gc3RhcnQueSB9O1xuICAgICAgICByZXR1cm4gbmV3IENvb3JkaW5hdGVEYXRhKHN0YXJ0LCBzaXplKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgcG9zOiB0aGlzLnBvcyxcbiAgICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZSxcbiAgICAgICAgICAgIGxlZnRUb3BQb3M6IHRoaXMuZ2V0TGVmdFRvcFBvcygpLFxuICAgICAgICAgICAgbGVmdEJvdHRvbVBvczogdGhpcy5nZXRMZWZ0Qm90dG9tUG9zKCksXG4gICAgICAgICAgICByaWdodEJvdHRvbVBvczogdGhpcy5nZXRSaWdodEJvdHRvbVBvcygpLFxuICAgICAgICAgICAgcmlnaHRUb3BQb3M6IHRoaXMuZ2V0UmlnaHRUb3BQb3MoKVxuICAgICAgICB9LCBudWxsLCBcIlxcdFwiKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTdHJva2VGaWxsU3R5bGVNaXggfSBmcm9tIFwiLi9EcmF3XCI7XG5leHBvcnQgY2xhc3MgRHJhd0xpbmUgZXh0ZW5kcyBTdHJva2VGaWxsU3R5bGVNaXgge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNsb3NlUGF0aCA9IGZhbHNlO1xuICAgIH1cbn1cbiIsImV4cG9ydCAqIGZyb20gXCIuL0RyYXdcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0RyYXdJbWFnZVwiO1xuZXhwb3J0ICogZnJvbSBcIi4vRHJhd1JlY3RcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0RyYXdUZXh0XCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZW5kZXJSZXN1bHRcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0Nvb3JkaW5hdGVEYXRhXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9EcmF3TGluZVwiO1xuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgQ29yZVJlbmRlciB7XG4gICAgY29uc3RydWN0b3IoZWxlbWVudCwgZGF0YSkge1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBlbGVtZW50LmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJSZXN1bHQgPSB5aWVsZCB0aGlzLmRvUmVuZGVyKCk7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyUmVzdWx0O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgdXBkYXRlRm9udChmb250KSB7XG4gICAgICAgIGxldCB2YWx1ZSA9IFwiXCI7XG4gICAgICAgIGlmIChmb250LnNpemUpIHtcbiAgICAgICAgICAgIHZhbHVlICs9IGZvbnQuc2l6ZSArIFwicHhcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZm9udC5mYW1pbHkpIHtcbiAgICAgICAgICAgIHZhbHVlICs9IFwiIFwiICsgZm9udC5mYW1pbHk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0LmZvbnQgPSB2YWx1ZTtcbiAgICB9XG4gICAgdXBkYXRlRmlsbFN0eWxlKGZpbGwpIHtcbiAgICAgICAgaWYgKGZpbGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBmaWxsO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB1cGRhdGVTdHJva2VTdHlsZShzdHJva2UpIHtcbiAgICAgICAgaWYgKHN0cm9rZSkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVN0eWxlID0gc3Ryb2tlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgQ29yZVJlbmRlciB9IGZyb20gXCIuL0NvcmVSZW5kZXJcIjtcbmV4cG9ydCBjbGFzcyBJbWFnZVJlbmRlciBleHRlbmRzIENvcmVSZW5kZXIge1xuICAgIGRvUmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcuc3JjID0gdGhpcy5kYXRhLnNyYztcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgaW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGEuc3JjQ29vcmRzLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YS5zcmNDb29yZHMuc2l6ZSA9IHsgd2lkdGg6IGltZy53aWR0aCwgaGVpZ2h0OiBpbWcuaGVpZ2h0IH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGEuZGVzdENvb3Jkcy5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGEuZGVzdENvb3Jkcy5zaXplID0gdGhpcy5kYXRhLnNyY0Nvb3Jkcy5zaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5kcmF3SW1hZ2UoaW1nLCB0aGlzLmRhdGEuc3JjQ29vcmRzLnBvcy54LCB0aGlzLmRhdGEuc3JjQ29vcmRzLnBvcy55LCB0aGlzLmRhdGEuc3JjQ29vcmRzLnNpemUud2lkdGgsIHRoaXMuZGF0YS5zcmNDb29yZHMuc2l6ZS5oZWlnaHQsIHRoaXMuZGF0YS5kZXN0Q29vcmRzLnBvcy54LCB0aGlzLmRhdGEuZGVzdENvb3Jkcy5wb3MueSwgdGhpcy5kYXRhLmRlc3RDb29yZHMuc2l6ZS53aWR0aCwgdGhpcy5kYXRhLmRlc3RDb29yZHMuc2l6ZS5oZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsgc3VjY2VzczogdHJ1ZSwgcmVzdWx0OiB0aGlzLmRhdGEuZGVzdENvb3JkcyB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsIGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5pbXBvcnQgeyBDb3JlUmVuZGVyIH0gZnJvbSBcIi4vQ29yZVJlbmRlclwiO1xuaW1wb3J0IHsgQ29vcmRpbmF0ZURhdGEsIERyYXdUeXBlIH0gZnJvbSBcIi4uL21vZGVscy9pbmRleFwiO1xuZXhwb3J0IGNsYXNzIFJlY3RSZW5kZXIgZXh0ZW5kcyBDb3JlUmVuZGVyIHtcbiAgICBkb1JlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVGaWxsU3R5bGUodGhpcy5kYXRhLmZpbGxTdHlsZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHJva2VTdHlsZSh0aGlzLmRhdGEuc3Ryb2tlU3R5bGUpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGEuZHJhd1R5cGUgPT09IERyYXdUeXBlLkZpbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KHRoaXMuZGF0YS5wb3MueCwgdGhpcy5kYXRhLnBvcy55LCB0aGlzLmRhdGEuc2l6ZS53aWR0aCwgdGhpcy5kYXRhLnNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5kcmF3VHlwZSA9PT0gRHJhd1R5cGUuU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5zdHJva2VSZWN0KHRoaXMuZGF0YS5wb3MueCwgdGhpcy5kYXRhLnBvcy55LCB0aGlzLmRhdGEuc2l6ZS53aWR0aCwgdGhpcy5kYXRhLnNpemUuaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7IHN1Y2Nlc3M6IHRydWUsIHJlc3VsdDogbmV3IENvb3JkaW5hdGVEYXRhKHRoaXMuZGF0YS5wb3MsIHRoaXMuZGF0YS5zaXplKSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJ2YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbmltcG9ydCB7IENvb3JkaW5hdGVEYXRhLCBEcmF3VHlwZSwgVGV4dEFsaWduVHlwZSB9IGZyb20gXCIuLi9tb2RlbHMvaW5kZXhcIjtcbmltcG9ydCB7IENvcmVSZW5kZXIgfSBmcm9tIFwiLi9Db3JlUmVuZGVyXCI7XG5leHBvcnQgY2xhc3MgVGV4dFJlbmRlciBleHRlbmRzIENvcmVSZW5kZXIge1xuICAgIGRvUmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGb250KHRoaXMuZGF0YS5mb250KTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRmlsbFN0eWxlKHRoaXMuZGF0YS5maWxsU3R5bGUpO1xuICAgICAgICAgICAgY29uc3QgdGV4dFdpZHRoID0gdGhpcy5jb250ZXh0Lm1lYXN1cmVUZXh0KHRoaXMuZGF0YS5mb250LnRleHQpLndpZHRoO1xuICAgICAgICAgICAgbGV0IGRlc3RYID0gdGhpcy5kYXRhLnBvcy54O1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5mb250LmFsaWduID09PSBUZXh0QWxpZ25UeXBlLlJpZ2h0KSB7XG4gICAgICAgICAgICAgICAgZGVzdFggPSB0aGlzLmNvbnRleHQuY2FudmFzLndpZHRoIC0gdGhpcy5kYXRhLnBvcy54IC0gdGV4dFdpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5mb250LmFsaWduID09PSBUZXh0QWxpZ25UeXBlLkNlbnRlcikge1xuICAgICAgICAgICAgICAgIGRlc3RYID0gdGhpcy5kYXRhLnBvcy54IC0gKHRleHRXaWR0aCAvIDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZGVzdFkgPSB0aGlzLmRhdGEucG9zLnkgKyB0aGlzLmRhdGEuZm9udC5zaXplO1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5kcmF3VHlwZSA9PT0gRHJhd1R5cGUuRmlsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5maWxsVGV4dCh0aGlzLmRhdGEuZm9udC50ZXh0LCBkZXN0WCwgZGVzdFkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5kcmF3VHlwZSA9PT0gRHJhd1R5cGUuU3Ryb2tlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZVRleHQodGhpcy5kYXRhLmZvbnQudGV4dCwgZGVzdFgsIGRlc3RZKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogbmV3IENvb3JkaW5hdGVEYXRhKHtcbiAgICAgICAgICAgICAgICAgICAgeDogZGVzdFgsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRoaXMuZGF0YS5wb3MueVxuICAgICAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmRhdGEuZm9udC5zaXplLFxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdGV4dFdpZHRoXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsImltcG9ydCB7IENvcmVSZW5kZXIgfSBmcm9tIFwiLi9Db3JlUmVuZGVyXCI7XG5pbXBvcnQgeyBSZW5kZXJDb29yZHNSZXN1bHQsIERyYXdUeXBlLCBDb29yZGluYXRlRGF0YSB9IGZyb20gXCIuLi9tb2RlbHMvaW5kZXhcIjtcbmV4cG9ydCBjbGFzcyBMaW5lUmVuZGVyIGV4dGVuZHMgQ29yZVJlbmRlciB7XG4gICAgZG9SZW5kZXIoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlRmlsbFN0eWxlKHRoaXMuZGF0YS5maWxsU3R5bGUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN0cm9rZVN0eWxlKHRoaXMuZGF0YS5zdHJva2VTdHlsZSk7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmxpbmVXaWR0aCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IHRoaXMuZGF0YS5saW5lV2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xuICAgICAgICB0aGlzLmRhdGEucG9zaXRpb25zLmZvckVhY2goKHBvcywgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8ocG9zLngsIHBvcy55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8ocG9zLngsIHBvcy55KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmICh0aGlzLmRhdGEuY2xvc2VQYXRoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZGF0YS5kcmF3VHlwZSA9PT0gRHJhd1R5cGUuRmlsbCkge1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmZpbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5kYXRhLmRyYXdUeXBlID09PSBEcmF3VHlwZS5TdHJva2UpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zdHJva2UoKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWluUG9zWCA9IDAsIG1pblBvc1kgPSAwLCBtYXhQb3NYID0gMCwgbWF4UG9zWSA9IDA7XG4gICAgICAgIHRoaXMuZGF0YS5wb3NpdGlvbnMuZm9yRWFjaChwb3MgPT4ge1xuICAgICAgICAgICAgaWYgKHBvcy54IDwgbWluUG9zWCkge1xuICAgICAgICAgICAgICAgIG1pblBvc1ggPSBwb3MueDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwb3MueCA+IG1heFBvc1gpIHtcbiAgICAgICAgICAgICAgICBtYXhQb3NYID0gcG9zLng7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zLnkgPCBtaW5Qb3NZKSB7XG4gICAgICAgICAgICAgICAgbWluUG9zWSA9IHBvcy55O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBvcy55ID4gbWF4UG9zWSkge1xuICAgICAgICAgICAgICAgIG1heFBvc1kgPSBwb3MueTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlbmRlclJlc3VsdCA9IG5ldyBSZW5kZXJDb29yZHNSZXN1bHQoKTtcbiAgICAgICAgcmVuZGVyUmVzdWx0LnN1Y2Nlc3MgPSB0cnVlO1xuICAgICAgICByZW5kZXJSZXN1bHQucmVzdWx0ID0gQ29vcmRpbmF0ZURhdGEuaW5pdCh7XG4gICAgICAgICAgICB4OiBtaW5Qb3NYLFxuICAgICAgICAgICAgeTogbWluUG9zWVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBtYXhQb3NYLFxuICAgICAgICAgICAgeTogbWF4UG9zWVxuICAgICAgICB9KTtcbiAgICAgICAgcmVuZGVyUmVzdWx0LnJlc3VsdC5kYXRhID0gdGhpcy5kYXRhO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlbmRlclJlc3VsdCk7XG4gICAgfVxufVxuIiwidmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5leHBvcnQgY2xhc3MgUmVuZGVyQ2hhaW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJlbmRlcnMgPSBbXTtcbiAgICB9XG4gICAgcHVzaChyZW5kZXIsIGlkKSB7XG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIGlkID0gRGF0ZS5ub3coKS50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVycy5wdXNoKHsgaWQ6IGlkLCBnZXRSZW5kZXI6IHJlbmRlciB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGV4ZWN1dGUoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJzLnJlZHVjZSgocHJldiwgbmV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2LnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dC5nZXRSZW5kZXIoeyBjaGFpbjogdGhpcyB9KS5yZW5kZXIoKS50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0LnJlbmRlclJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcIm9rXCI7XG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IFwiZmFpbFwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIFByb21pc2UucmVzb2x2ZShcImZpcnN0XCIpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldCByZW5kZXJSZXN1bHRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJzLmZpbHRlcihpdGVtID0+IGl0ZW0ucmVuZGVyUmVzdWx0ICE9PSBudWxsICYmIGl0ZW0ucmVuZGVyUmVzdWx0ICE9PSB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBnZXQgbGFzdFJlbmRlclJlc3VsdCgpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHRoaXMucmVuZGVyUmVzdWx0cztcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tyZXN1bHRzLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdC5yZW5kZXJSZXN1bHQ7XG4gICAgfVxuICAgIGdldFJlbmRlclJlc3VsdEJ5SWQoaWQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZW5kZXJSZXN1bHRzLmZpbHRlcihpdGVtID0+IGl0ZW0uaWQgPT09IGlkKVswXTtcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQucmVuZGVyUmVzdWx0O1xuICAgIH1cbn1cbiIsInZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuaW1wb3J0IHsgSW1hZ2VSZW5kZXIsIFJlbmRlckNoYWluIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IENvb3JkaW5hdGVEYXRhIH0gZnJvbSBcIi4uL21vZGVscy9pbmRleFwiO1xuZXhwb3J0IGNsYXNzIFJlbmRlckNoYWluRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGVsZW1lbnQuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBlbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNhbGN1bGF0ZShjb2RlLCBkZWYpIHtcbiAgICAgICAgY29uc3QgZm4gPSBuZXcgRnVuY3Rpb24oY29kZSk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuLmFwcGx5KHRoaXMpO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdW5kZWZpbmVkIHx8IHJlc3VsdCA9PT0gXCJcIikge1xuICAgICAgICAgICAgcmV0dXJuIGRlZjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBjb252ZXJ0MkltYWdlKGVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc3JjQ29vcmRzUG9zID0gdGhpcy5jYWxjdWxhdGUoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJzcmMtY29vcmRzLXBvc1wiKSk7XG4gICAgICAgIGNvbnN0IGRlc3RDb29yZHNQb3MgPSB0aGlzLmNhbGN1bGF0ZShlbGVtZW50LmdldEF0dHJpYnV0ZShcImRlc3QtY29vcmRzLXBvc1wiKSk7XG4gICAgICAgIGNvbnN0IGRlc3RDb29yZHNTaXplID0gdGhpcy5jYWxjdWxhdGUoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkZXN0LWNvb3Jkcy1zaXplXCIpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbWFnZVJlbmRlcih0aGlzLmNvbnRleHQsIHtcbiAgICAgICAgICAgIHNyYzogZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJzcmNcIiksXG4gICAgICAgICAgICBzcmNDb29yZHM6IG5ldyBDb29yZGluYXRlRGF0YShzcmNDb29yZHNQb3MpLFxuICAgICAgICAgICAgZGVzdENvb3JkczogbmV3IENvb3JkaW5hdGVEYXRhKGRlc3RDb29yZHNQb3MsIGRlc3RDb29yZHNTaXplKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVuZGVyKHRlbXBsYXRlSWRPckNoaWxkcmVuKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBsZXQgY2hpbGRyZW5Ob2RlcyA9IFtdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wbGF0ZUlkT3JDaGlsZHJlbiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0ZW1wbGF0ZUlkT3JDaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW5Ob2RlcyA9IEFycmF5LmZyb20odGVtcGxhdGUuY29udGVudC5jaGlsZE5vZGVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRlbXBsYXRlSWRPckNoaWxkcmVuKSkge1xuICAgICAgICAgICAgICAgIGNoaWxkcmVuTm9kZXMgPSBjaGlsZHJlbk5vZGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jaGFpbiA9IG5ldyBSZW5kZXJDaGFpbigpO1xuICAgICAgICAgICAgY2hpbGRyZW5Ob2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChub2RlLm5vZGVOYW1lID09PSBcIklNR1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhaW4ucHVzaChwYXJhbXMgPT4gdGhpcy5jb252ZXJ0MkltYWdlKG5vZGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNoYWluLmV4ZWN1dGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIiwiZXhwb3J0ICogZnJvbSBcIi4vQ29yZVJlbmRlclwiO1xuZXhwb3J0ICogZnJvbSBcIi4vSW1hZ2VSZW5kZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1JlY3RSZW5kZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1RleHRSZW5kZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL0xpbmVSZW5kZXJcIjtcbmV4cG9ydCAqIGZyb20gXCIuL1JlbmRlckNoYWluXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9SZW5kZXJDaGFpbkRpcmVjdGl2ZVwiO1xuIiwiaW1wb3J0IHsgUmVjdFJlbmRlciwgVGV4dFJlbmRlciwgSW1hZ2VSZW5kZXIsIExpbmVSZW5kZXIsIFJlbmRlckNoYWluIH0gZnJvbSBcIi4vY29yZS9pbmRleFwiO1xuaW1wb3J0IHsgQ29vcmRpbmF0ZURhdGEsIERyYXdMaW5lLCBEcmF3UmVjdCwgRHJhd1R5cGUsIFRleHRBbGlnblR5cGUgfSBmcm9tIFwiLi9tb2RlbHMvaW5kZXhcIjtcbmNvbnN0IGNhbnZhczEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhbnZhczFcIik7XG5jb25zdCBjb250ZXh0ID0gY2FudmFzMS5nZXRDb250ZXh0KFwiMmRcIik7XG5jb25zdCBjaGFpbiA9IG5ldyBSZW5kZXJDaGFpbigpO1xuY2hhaW4ucHVzaChwYXJhbXMgPT4gbmV3IEltYWdlUmVuZGVyKGNvbnRleHQsIHtcbiAgICBzcmM6IFwiLi9yZXNvdXJjZXMvMjgwVFNJLmpwZ1wiLFxuICAgIHNyY0Nvb3JkczogbmV3IENvb3JkaW5hdGVEYXRhKHsgeDogMCwgeTogMCB9KSxcbiAgICBkZXN0Q29vcmRzOiBuZXcgQ29vcmRpbmF0ZURhdGEoeyB4OiAwLCB5OiAwIH0sIHsgd2lkdGg6IDMwMCwgaGVpZ2h0OiAyMjUgfSlcbn0pLCBcIm1haW4taW1hZ2VcIikucHVzaChwYXJhbXMgPT4ge1xuICAgIHJldHVybiBuZXcgSW1hZ2VSZW5kZXIoY29udGV4dCwge1xuICAgICAgICBzcmM6IFwiaHR0cDovL3Z3LmZhdy12dy5jb20vY29udGVudC9kYW0vdnctbmd3L2Zhdy12dy9ob21lcGFnZS9zaXRlX2xvZ28vcGNfbG9nby5wbmdcIixcbiAgICAgICAgc3JjQ29vcmRzOiBuZXcgQ29vcmRpbmF0ZURhdGEoeyB4OiAwLCB5OiAwIH0pLFxuICAgICAgICBkZXN0Q29vcmRzOiBuZXcgQ29vcmRpbmF0ZURhdGEoeyB4OiAxMCwgeTogOCB9KVxuICAgIH0pO1xufSwgXCJsb2dvXCIpLnB1c2gocGFyYW1zID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGNoYWluLmdldFJlbmRlclJlc3VsdEJ5SWQoXCJtYWluLWltYWdlXCIpO1xuICAgIGNvbnN0IHBvcyA9IHJlc3BvbnNlLnJlc3VsdC5nZXRSaWdodEJvdHRvbVBvcygpO1xuICAgIGNvbnN0IHRleHRSZW5kZXIgPSBuZXcgVGV4dFJlbmRlcihjb250ZXh0LCB7XG4gICAgICAgIHBvczogeyB4OiA1LCB5OiBwb3MueSArIDEyIH0sXG4gICAgICAgIGZvbnQ6IHsgdGV4dDogXCLlpKfkvJcg5YeM5rihIDI4MFRTSSBEU0foiJLpgILniYjlm71WSVwiLCBzaXplOiAxNCwgZmFtaWx5OiBcInNhbnMtc2VyaWZcIiwgYWxpZ246IFRleHRBbGlnblR5cGUuUmlnaHQgfSxcbiAgICAgICAgZHJhd1R5cGU6IERyYXdUeXBlLkZpbGxcbiAgICB9KTtcbiAgICByZXR1cm4gdGV4dFJlbmRlcjtcbn0sIFwidGl0bGVcIikucHVzaChwYXJhbXMgPT4ge1xuICAgIGNvbnN0IGxvZ29SZXN1bHQgPSBwYXJhbXMuY2hhaW4uZ2V0UmVuZGVyUmVzdWx0QnlJZChcImxvZ29cIikucmVzdWx0O1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgRHJhd1JlY3QoKTtcbiAgICBkYXRhLnBvcyA9IGxvZ29SZXN1bHQucG9zO1xuICAgIGRhdGEuc2l6ZSA9IGxvZ29SZXN1bHQuc2l6ZTtcbiAgICBkYXRhLnN0cm9rZVN0eWxlID0gXCJncmF5XCI7XG4gICAgcmV0dXJuIG5ldyBSZWN0UmVuZGVyKGNvbnRleHQsIGRhdGEpO1xufSwgXCJyZWN0XCIpLnB1c2gocGFyYW1zID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IHBhcmFtcy5jaGFpbi5nZXRSZW5kZXJSZXN1bHRCeUlkKFwidGl0bGVcIik7XG4gICAgY29uc3QgcG9zID0gcmVzcG9uc2UucmVzdWx0LmdldFJpZ2h0Qm90dG9tUG9zKCk7XG4gICAgY29uc3QgdGV4dFJlbmRlciA9IG5ldyBUZXh0UmVuZGVyKGNvbnRleHQsIHtcbiAgICAgICAgcG9zOiB7IHg6IDUsIHk6IHBvcy55ICsgMTAgfSxcbiAgICAgICAgZm9udDogeyB0ZXh0OiBcIjE4LjAw5LiHXCIsIHNpemU6IDEyLCBmYW1pbHk6IFwic2Fucy1zZXJpZlwiLCBhbGlnbjogVGV4dEFsaWduVHlwZS5SaWdodCB9LFxuICAgICAgICBmaWxsU3R5bGU6IFwiZ3JheVwiLFxuICAgICAgICBkcmF3VHlwZTogRHJhd1R5cGUuRmlsbFxuICAgIH0pO1xuICAgIHJldHVybiB0ZXh0UmVuZGVyO1xufSwgXCJzbWFsbC1wcmljZVwiKS5wdXNoKHBhcmFtcyA9PiB7XG4gICAgY29uc3Qgc21hbGxQcmljZVJlc3VsdCA9IHBhcmFtcy5jaGFpbi5nZXRSZW5kZXJSZXN1bHRCeUlkKFwic21hbGwtcHJpY2VcIikucmVzdWx0O1xuICAgIGNvbnN0IHRpdGxlUmVzdWx0ID0gcGFyYW1zLmNoYWluLmdldFJlbmRlclJlc3VsdEJ5SWQoXCJ0aXRsZVwiKS5yZXN1bHQ7XG4gICAgY29uc3QgdGl0bGVQb3MgPSB0aXRsZVJlc3VsdC5nZXRSaWdodEJvdHRvbVBvcygpO1xuICAgIGNvbnN0IHRleHRSZW5kZXIgPSBuZXcgVGV4dFJlbmRlcihjb250ZXh0LCB7XG4gICAgICAgIHBvczogeyB4OiBzbWFsbFByaWNlUmVzdWx0LnNpemUud2lkdGggKyAxMCwgeTogdGl0bGVQb3MueSArIDUgfSxcbiAgICAgICAgZm9udDogeyB0ZXh0OiBcIjEyLjQ45LiHXCIsIHNpemU6IDE4LCBmYW1pbHk6IFwic2Fucy1zZXJpZlwiLCBhbGlnbjogVGV4dEFsaWduVHlwZS5SaWdodCB9LFxuICAgICAgICBmaWxsU3R5bGU6IFwicmVkXCIsXG4gICAgICAgIGRyYXdUeXBlOiBEcmF3VHlwZS5GaWxsLFxuICAgIH0pO1xuICAgIHJldHVybiB0ZXh0UmVuZGVyO1xufSwgXCJsYXJnZS1wcmljZVwiKS5wdXNoKHBhcmFtcyA9PiB7XG4gICAgY29uc3Qgc21hbGxQcmljZVJlc3VsdCA9IHBhcmFtcy5jaGFpbi5nZXRSZW5kZXJSZXN1bHRCeUlkKFwic21hbGwtcHJpY2VcIikucmVzdWx0O1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgRHJhd0xpbmUoKTtcbiAgICBkYXRhLnBvc2l0aW9ucyA9IFtcbiAgICAgICAgeyB4OiBzbWFsbFByaWNlUmVzdWx0LmdldExlZnRUb3BQb3MoKS54LCB5OiBzbWFsbFByaWNlUmVzdWx0LmdldENlbnRlclBvcygpLnkgKyAyIH0sXG4gICAgICAgIHsgeDogc21hbGxQcmljZVJlc3VsdC5nZXRSaWdodEJvdHRvbVBvcygpLngsIHk6IHNtYWxsUHJpY2VSZXN1bHQuZ2V0Q2VudGVyUG9zKCkueSArIDIgfVxuICAgIF07XG4gICAgZGF0YS5zdHJva2VTdHlsZSA9IFwiZ3JheVwiO1xuICAgIGRhdGEuZHJhd1R5cGUgPSBEcmF3VHlwZS5TdHJva2U7XG4gICAgZGF0YS5saW5lV2lkdGggPSAuODtcbiAgICByZXR1cm4gbmV3IExpbmVSZW5kZXIoY29udGV4dCwgZGF0YSk7XG59KS5wdXNoKHBhcmFtcyA9PiB7XG4gICAgY29uc3QgcmVuZGVyUmVzdWx0ID0gcGFyYW1zLmNoYWluLmdldFJlbmRlclJlc3VsdEJ5SWQoXCJzbWFsbC1wcmljZVwiKS5yZXN1bHQ7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgZHJhd1R5cGU6IERyYXdUeXBlLkZpbGwsXG4gICAgICAgIHBvczogeyB4OiA1LCB5OiByZW5kZXJSZXN1bHQuZ2V0UmlnaHRCb3R0b21Qb3MoKS55ICsgMTAgfSxcbiAgICAgICAgZmlsbFN0eWxlOiBcIiNGNTU5NEVcIixcbiAgICAgICAgZm9udDoge1xuICAgICAgICAgICAgc2l6ZTogMTAsXG4gICAgICAgICAgICB0ZXh0OiBcIuaAu+S8mOaDoOWPr+i+vjUuNjPkuIcgIOS9juS6juWQjOWfjjRT5bqX5oql5Lu3MS44M+S4h1wiLFxuICAgICAgICAgICAgZmFtaWx5OiBcIkhlbHZldGljYVwiLFxuICAgICAgICAgICAgYWxpZ246IFRleHRBbGlnblR5cGUuUmlnaHRcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBUZXh0UmVuZGVyKGNvbnRleHQsIGRhdGEpO1xufSwgXCJzdWItdGl0bGVcIikucHVzaChwYXJhbXMgPT4ge1xuICAgIGNvbnN0IGxhcmdlUHJpY2VSZXN1bHQgPSBwYXJhbXMuY2hhaW4uZ2V0UmVuZGVyUmVzdWx0QnlJZChcInN1Yi10aXRsZVwiKTtcbiAgICBjb25zdCBwb3NZID0gbGFyZ2VQcmljZVJlc3VsdC5yZXN1bHQuZ2V0UmlnaHRCb3R0b21Qb3MoKS55ICsgMTU7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBEcmF3TGluZSgpO1xuICAgIGRhdGEucG9zaXRpb25zID0gW3tcbiAgICAgICAgICAgIHg6IDUsIHk6IHBvc1lcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogY29udGV4dC5jYW52YXMud2lkdGggLSA1LCB5OiBwb3NZXG4gICAgICAgIH1dO1xuICAgIGRhdGEuZHJhd1R5cGUgPSBEcmF3VHlwZS5TdHJva2U7XG4gICAgZGF0YS5saW5lV2lkdGggPSAuNTtcbiAgICBkYXRhLnN0cm9rZVN0eWxlID0gXCIjY2NjXCI7XG4gICAgcmV0dXJuIG5ldyBMaW5lUmVuZGVyKGNvbnRleHQsIGRhdGEpO1xufSwgXCJzcGxpdG9yXCIpLnB1c2gocGFyYW1zID0+IHtcbiAgICBjb25zdCByZW5kZXJSZXN1bHQgPSBwYXJhbXMuY2hhaW4uZ2V0UmVuZGVyUmVzdWx0QnlJZChcInNwbGl0b3JcIik7XG4gICAgY29uc3QgYmFzZVkgPSByZW5kZXJSZXN1bHQucmVzdWx0LmdldFJpZ2h0Qm90dG9tUG9zKCkueSArIDE1O1xuICAgIGNvbnN0IGJhc2VYID0gNTtcbiAgICBjb25zdCBwZXJXaWR0aCA9IGNvbnRleHQuY2FudmFzLndpZHRoIC8gNDtcbiAgICBjb25zdCBkYXRhID0gbmV3IERyYXdMaW5lKCk7XG4gICAgZGF0YS5wb3NpdGlvbnMgPSBbe1xuICAgICAgICAgICAgeDogYmFzZVgsIHk6IGJhc2VZICsgMjBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogYmFzZVggKyBwZXJXaWR0aCwgeTogYmFzZVkgKyAyMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBiYXNlWCArIHBlcldpZHRoICsgcGVyV2lkdGgsIHk6IGJhc2VZICsgNDBcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogYmFzZVggKyBwZXJXaWR0aCArIHBlcldpZHRoICsgcGVyV2lkdGgsIHk6IGJhc2VZICsgMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBiYXNlWCArIHBlcldpZHRoICsgcGVyV2lkdGggKyBwZXJXaWR0aCArIHBlcldpZHRoIC0gMTAsIHk6IGJhc2VZICsgMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgICB4OiBiYXNlWCArIHBlcldpZHRoICsgcGVyV2lkdGggKyBwZXJXaWR0aCArIHBlcldpZHRoIC0gMTAsIHk6IGJhc2VZICsgNzJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogYmFzZVgsIHk6IGJhc2VZICsgNzJcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgeDogYmFzZVgsIHk6IGJhc2VZICsgMjBcbiAgICAgICAgfV07XG4gICAgZGF0YS5kcmF3VHlwZSA9IERyYXdUeXBlLkZpbGw7XG4gICAgZGF0YS5maWxsU3R5bGUgPSBcIiNmZGVlZWRcIjtcbiAgICByZXR1cm4gbmV3IExpbmVSZW5kZXIoY29udGV4dCwgZGF0YSk7XG59LCBcImZvbGQtbGluZVwiKS5wdXNoKHBhcmFtcyA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHBhcmFtcy5jaGFpbi5nZXRSZW5kZXJSZXN1bHRCeUlkKFwiZm9sZC1saW5lXCIpLnJlc3VsdC5kYXRhO1xuICAgIHJldHVybiBuZXcgVGV4dFJlbmRlcihjb250ZXh0LCB7XG4gICAgICAgIHBvczogeyB4OiBkYXRhLnBvc2l0aW9uc1sxXS54LCB5OiBkYXRhLnBvc2l0aW9uc1sxXS55IC0gMTUgfSxcbiAgICAgICAgZm9udDogeyB0ZXh0OiBcIjE0Ljc45LiHXCIsIHNpemU6IDEwLCBhbGlnbjogVGV4dEFsaWduVHlwZS5DZW50ZXIgfSxcbiAgICAgICAgZmlsbFN0eWxlOiBcIiNmNTU5NGVcIixcbiAgICAgICAgZHJhd1R5cGU6IERyYXdUeXBlLkZpbGwsXG4gICAgfSk7XG59KS5wdXNoKHBhcmFtcyA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHBhcmFtcy5jaGFpbi5nZXRSZW5kZXJSZXN1bHRCeUlkKFwiZm9sZC1saW5lXCIpLnJlc3VsdC5kYXRhO1xuICAgIHJldHVybiBuZXcgVGV4dFJlbmRlcihjb250ZXh0LCB7XG4gICAgICAgIHBvczogeyB4OiBkYXRhLnBvc2l0aW9uc1syXS54LCB5OiBkYXRhLnBvc2l0aW9uc1syXS55IH0sXG4gICAgICAgIGZvbnQ6IHsgdGV4dDogXCIxMi40OOS4h1wiLCBzaXplOiAxMCwgYWxpZ246IFRleHRBbGlnblR5cGUuQ2VudGVyIH0sXG4gICAgICAgIGZpbGxTdHlsZTogXCIjZjU1OTRlXCIsXG4gICAgICAgIGRyYXdUeXBlOiBEcmF3VHlwZS5GaWxsLFxuICAgIH0pO1xufSkucHVzaChwYXJhbXMgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBwYXJhbXMuY2hhaW4uZ2V0UmVuZGVyUmVzdWx0QnlJZChcImZvbGQtbGluZVwiKS5yZXN1bHQuZGF0YTtcbiAgICByZXR1cm4gbmV3IFRleHRSZW5kZXIoY29udGV4dCwge1xuICAgICAgICBwb3M6IHsgeDogZGF0YS5wb3NpdGlvbnNbM10ueCwgeTogZGF0YS5wb3NpdGlvbnNbM10ueSAtIDEyIH0sXG4gICAgICAgIGZvbnQ6IHsgdGV4dDogXCIxNi4yN+S4h1wiLCBzaXplOiAxMCwgYWxpZ246IFRleHRBbGlnblR5cGUuQ2VudGVyIH0sXG4gICAgICAgIGZpbGxTdHlsZTogXCIjZjU1OTRlXCIsXG4gICAgICAgIGRyYXdUeXBlOiBEcmF3VHlwZS5GaWxsLFxuICAgIH0pO1xufSkucHVzaChwYXJhbXMgPT4ge1xuICAgIGNvbnN0IHJlbmRlclJlc3VsdCA9IHBhcmFtcy5jaGFpbi5nZXRSZW5kZXJSZXN1bHRCeUlkKFwibWFpbi1pbWFnZVwiKS5yZXN1bHQ7XG4gICAgcmV0dXJuIG5ldyBJbWFnZVJlbmRlcihjb250ZXh0LCB7XG4gICAgICAgIHNyYzogXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUh3QUFBQjhDQVlBQUFDckh0UytBQUFERmtsRVFWUjRuTzJXUzI3Rk1Bd0RjLzlMdC91Z0JlU1FsdWhrQ0hpbkQ4WEpBOTUxWGRkUHdsTlVuZWYyNHQ3YjlNWU5BQnpnYXdJNHdLWGdwL2FPQU8rUUVwUlNWKzExZjdqdUQxeThMY05JUjEyMUYrQU5SanJxcXIwQWJ6RFNVVmZ0QlhpRGtZNjZhdS9uZ2I4NWdBNS95bDUzemdCdjhBZHdnSmZyQUM0STRBQnY4UWZ3ckFDc093NjROOFBJWUFBQW56QXlHQURBSjR3TUJnRHdDU09EQVFCOHdvZzd2STU1aDM3Z0dVYXFBampBeTcxVFhnQU84SElkd0FHK0g3aGI3Z0NTZXBWNzNRSTR3QUh1N2xYdWRRdmdBQWU0dTFlNTE2MFM4S21uQkhWaTNlQWJOM0FFSUlBREhPQUFCempBMDRELzZUQlk3bytxdWtPcFMxSyt3NXNBcmluZjRVMEExNVR2OENhQWE4cDNlQlBBTlYxS2dFOURudHJSSWJlL0RYVUFkd3JnUlhNQUJ6akE5OVFCM0tuamdDdkRGQ2s3M0I5YXh4MkRld0VPOE0zbTNEc0FEdkJ5SGNBYnpMbDNBTno4TDMzRDBwRzZhbS82RSs4QStHbFB2QVBncHozeERvQ2Y5c1E3QUg3YUUrL3dMVlhVc2RlOXd3M0lMWUFESE9BQUIzakxQSUFEWExwdHdaOFBlTWV4VS80NlBMdjlBUnpnQUhmdlVPWUJYRGpXN1EvZzVrRGQ0Ym45ZlFxNGNsaEg3NVE2N3QxUUIvQ25BampBN2IwQUR4TEFBVzd2M1E2OE9pejkySzk1WHVnSCtCczhBL3hqbmdIK01jOEEvNWpuR09BZEFhVERUZG9CY0xQbjlCMEFOM3RPM3dGd3MrZjBIUUEzZTA3ZlVRSytNT3dWTUJRdkhibUkrUUg4cVFBT2NJQURIT0FBbndUdU9uNkgzQUZNQVZMdXRmOWdKSWViQlhDQTIrc0FIaVNBQTl4ZTl6bmdIU0U4Tlp3VWNyWFhYYmZoemNNRytKb1hnQXNDT01BQkR2QVhBKzlRQjdScW5lTGwwSThQNEFEZkxJRFg1d0ZjbUFkd2dBTmNNYkxCWFBTSGtmUVc3Z0M0ODE2QW00TlhCSENBMis4RnVEbDRSUUIvQ1hEM2g2Rm9FR1QxQWR3cGdCZm5kZFIxQ09ERmVSMTFIUUo0Y1Y1SFhZY0FYcHluMUNtZWsrYTVld0VlUHMvZEMvRHdlZTVlZ0lmUGMvY0NQSHlldS9jeGNMZW1nQ3U5N2cvY3ZXTmhMOEFydlFBWEJIQ0FTM1VkdlFBWEJQQWc0Rk5QZ2VZT3FrT0RXYy9EQmpqQS93MUZDUzlKQUMrR29vU1hKSUFYUTFIQ1M5SlV6ci9XWW15SzN0OWJsZ0FBQUFCSlJVNUVya0pnZ2c9PVwiLFxuICAgICAgICBzcmNDb29yZHM6IG5ldyBDb29yZGluYXRlRGF0YSh7IHg6IDAsIHk6IDAgfSksXG4gICAgICAgIGRlc3RDb29yZHM6IG5ldyBDb29yZGluYXRlRGF0YSh7XG4gICAgICAgICAgICB4OiByZW5kZXJSZXN1bHQuZ2V0TGVmdEJvdHRvbVBvcygpLnggKyA1LCB5OiByZW5kZXJSZXN1bHQuZ2V0TGVmdEJvdHRvbVBvcygpLnlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgd2lkdGg6IDcwLFxuICAgICAgICAgICAgaGVpZ2h0OiA3MFxuICAgICAgICB9KVxuICAgIH0pO1xufSk7XG5jb25zdCBzdGFydCA9IERhdGUubm93KCk7XG5jaGFpbi5leGVjdXRlKCkudGhlbigoKSA9PiB7XG4gICAgY29uc3QgZW5kID0gRGF0ZS5ub3coKTtcbiAgICBjb25zb2xlLmxvZyhgdGltZTogJHsoZW5kIC0gc3RhcnQpIC8gMTAwMH1zYCk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=